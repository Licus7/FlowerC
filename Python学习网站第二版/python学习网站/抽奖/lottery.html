<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç²¾çµæŠ½å¥–</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="l.css">
    <style>
        /* æ·»åŠ ä¸€äº›åŸºç¡€æ ·å¼ç¡®ä¿å›¾ç‰‡æ˜¾ç¤º */
        .pet-image-container img {
            width: 150px;
            height: 150px;
            object-fit: contain;
        }
        .new-pet img {
            width: 120px;
            height: 120px;
            object-fit: contain;
        }
        .pet-card img {
            width: 80px;
            height: 80px;
            object-fit: contain;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- è¿”å›æŒ‰é’® -->
        <a href="../menu.html" class="back-btn">
            <i class="fas fa-arrow-left"></i> è¿”å›
        </a>
        
        <!-- é‡‘å¸æ˜¾ç¤º -->
        <div class="coin-display">
            <i class="fas fa-coins"></i>
            <span id="currentCoins">0</span>
        </div>
        
        <div class="lottery-container">
            <h1><i class="fas fa-star"></i> ç²¾çµæŠ½å¥–</h1>
            <p class="subtitle">æ¶ˆè€—50é‡‘å¸æŠ½å–éšæœºç²¾çµ</p>
            
            <!-- æŠ½å¥–åŒºåŸŸ -->
            <div class="lottery-main">
                <div class="pet-image-container">
                    <!-- ä¿®æ”¹ä¸ºæœ¬åœ°å›¾ç‰‡è·¯å¾„ -->
                    <img id="currentPetImage" src="pokemon_gifs/25.gif" alt="çš®å¡ä¸˜">
                </div>
                
                <button id="drawButton" class="draw-btn" onclick="drawLottery()">
                    <i class="fas fa-star"></i> æŠ½å–ç²¾çµï¼<br>
                    <small>(èŠ±è´¹50é‡‘å¸)</small>
                </button>
            </div>
            
            <!-- æŠ½å¥–ç»“æœ -->
            <div id="resultContainer" class="result-container" style="display: none;">
                <h3>æ­å–œè·å¾—æ–°ç²¾çµï¼</h3>
                <div class="new-pet">
                    <img id="newPetImage" src="" alt="æ–°ç²¾çµ">
                    <div class="pet-info">
                        <h4 id="newPetName"></h4>
                        <div id="newPetRarity" class="new-pet-rarity"></div>
                        <p id="newPetDescription"></p>
                    </div>
                </div>
                <button class="close-btn" onclick="closeResult()">å…³é—­</button>
            </div>
            
            <!-- æˆ‘çš„ç²¾çµæ”¶è— -->
            <div class="collection-section">
                <h3><i class="fas fa-heart"></i> æˆ‘çš„ç²¾çµæ”¶è—</h3>
                <div id="myPetsGrid" class="pet-grid">
                    <!-- ç²¾çµä¼šåŠ¨æ€åŠ è½½ -->
                </div>
            </div>
        </div>
    </div>

    <!-- è°ƒè¯•æŒ‰é’® -->
    <button onclick="debugLottery()" style="
        position: fixed;
        bottom: 20px;
        left: 20px;
        padding: 10px 15px;
        background: #3498db;
        color: white;
        border: none;
        border-radius: 5px;
        z-index: 10000;
        font-size: 12px;
    ">
        ğŸ› è°ƒè¯•
    </button>

    <!-- å¼•å…¥æ­£ç¡®çš„è„šæœ¬ -->
    <script src="lottery.js"></script>
    <script src="l.js"></script>
    
    <script>
    // è°ƒè¯•å‡½æ•°
    function debugLottery() {
        console.log('=== æŠ½å¥–ç³»ç»Ÿè°ƒè¯• ===');
        
        // æ£€æŸ¥å…³é”®å…ƒç´ 
        const elements = {
            currentPetImage: document.getElementById('currentPetImage'),
            newPetImage: document.getElementById('newPetImage'),
            resultContainer: document.getElementById('resultContainer')
        };
        
        console.log('å…ƒç´ çŠ¶æ€:', elements);
        
        // æµ‹è¯•å›¾ç‰‡åŠ è½½
        console.log('æµ‹è¯•å›¾ç‰‡åŠ è½½:');
        const testImg = new Image();
        testImg.onload = () => console.log('âœ… æœ¬åœ°å›¾ç‰‡èƒ½åŠ è½½');
        testImg.onerror = () => console.log('âŒ æœ¬åœ°å›¾ç‰‡åŠ è½½å¤±è´¥');
        testImg.src = 'pokemon_gifs/25.gif';
        
        // æ£€æŸ¥æ–‡ä»¶å¤¹å†…å®¹
        console.log('å›¾ç‰‡æ–‡ä»¶å¤¹åº”è¯¥åŒ…å«: 1.gif, 4.gif, 7.gif, 25.gif ç­‰');
        
        alert('è¯·æŸ¥çœ‹æ§åˆ¶å° (F12 â†’ Console)');
    }
    
    // æ£€æŸ¥å›¾ç‰‡æ˜¯å¦å­˜åœ¨
    function checkImageExists(url, callback) {
        const img = new Image();
        img.onload = function() {
            callback(true);
        };
        img.onerror = function() {
            callback(false);
        };
        img.src = url;
    }
    
    // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥
    window.addEventListener('load', function() {
        console.log('é¡µé¢åŠ è½½å®Œæˆï¼Œæ£€æŸ¥å›¾ç‰‡...');
        
        // æ£€æŸ¥é»˜è®¤å›¾ç‰‡
        checkImageExists('pokemon_gifs/25.gif', function(exists) {
            if (!exists) {
                console.error('âŒ pokemon_gifs/25.gif ä¸å­˜åœ¨ï¼');
                console.log('è¯·ç¡®ä¿:');
                console.log('1. pokemon_gifs æ–‡ä»¶å¤¹å­˜åœ¨');
                console.log('2. æ–‡ä»¶å¤¹å†…æœ‰ 25.gif æ–‡ä»¶');
                console.log('3. æ–‡ä»¶å¤¹åœ¨æ­£ç¡®ä½ç½®ï¼ˆä¸ lottery.html åŒç›®å½•ï¼‰');
                
                // å°è¯•åˆ—å‡ºæ–‡ä»¶å¤¹å†…å®¹
                fetch('pokemon_gifs/')
                    .then(response => console.log('æ–‡ä»¶å¤¹çŠ¶æ€:', response.status))
                    .catch(err => console.log('æ— æ³•è®¿é—®æ–‡ä»¶å¤¹:', err));
            } else {
                console.log('âœ… å›¾ç‰‡å­˜åœ¨ï¼Œå¯ä»¥æ­£å¸¸æ˜¾ç¤º');
            }
        });
    });
    </script>
</body>
</html>